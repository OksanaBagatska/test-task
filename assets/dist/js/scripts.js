let locale="en",message={en:{empty:"The field is required",max_length:"Max length is ",email:"Email is incorrect",not_enough:"Not enough symbols",only_num:"Enter number"}};$.validator.setDefaults({ignore:[]});const only_num=/^[0-9.]+$/,only_num_replace=/[^0-9.]/g,email_reg=/^(([^<>()\[\]\\.,;:\s@"]{2,62}(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z-аА-яЯ\-0-9]+\.)+[a-zA-Z-аА-яЯ]{2,62}))$/,mobile_regex=/^[+]*[0-9]{1,3}[\s][(]{0,1}[0-9]{1,2}[)]{0,1}[-\s\.\/0-9]*$/g,mobile_mask="+1 999 999 99 99",mobile_mask_option={placeholder:"_",showMaskOnHover:!1},password_reg=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}$/s,inputs={email:{rules:{regex:email_reg,maxlength:320,messages:{regex:message[locale].email,maxlength:message[locale].max_length+320}}},numeric:{rules:{regex:only_num,messages:{regex:message[locale].only_num}}}};function validatorMethods(){$.validator.addMethod("regex",function(e,n,t){t=new RegExp(t);return""==e||t.test(e)}),$.validator.addMethod("regexReplace",function(e,n,t){t=new RegExp(t);return n.value=n.value.replace(t,""),!0})}function inputsRules(t){$("[required]",t).each(function(){$(this).rules("add",{required:!0,messages:{required:message[locale].empty}})}),$("[maxlength]",t).each(function(){var e=$(this).attr("maxlength");$(this).rules("add",{maxlength:e,messages:{maxlength:message[locale].max_length+e}}),$(this).on("input",function(){var e=$(this),n=parseInt(e.attr("maxlength"));e[0].value.length>n&&(e[0].value=e[0].value.substr(0,n))})}),$("[minlength]",t).each(function(){var e=$(this).attr("minlength");$(this).rules("add",{minlength:e,messages:{minlength:message[locale].min_length+e}})}),$('[data-validation="tel"]',t).length&&($('[data-validation="tel"]',t).inputmask(mobile_mask,mobile_mask_option),$('[data-validation="tel"]',t).rules("add",{regex:mobile_regex,messages:{regex:message[locale].not_enough,required:message[locale].empty}})),$('[data-validation="numeric"]',t).each(function(){this.addEventListener("input",function(){new RegExp(only_num_replace);this.value=this.value.replaceAll(",","."),0===this.value.indexOf(".")&&(this.value="0"+this.value),this.value=this.value.replace(/[^.\d]+/g,"").replace(/^([^\.]*\.)|\./g,"$1"),4<this.value.length&&(-1!==this.value.indexOf(".")&&this.value.indexOf(".")!==this.value.length-1?this.value=this.value.slice(0,5):this.value=this.value.slice(0,4))}),this.addEventListener("focusout",function(){this.value.indexOf(".")===this.value.length-1&&(this.value=this.value+"0")})}),$.each(inputs,function(e,n){e=$("[data-validation="+e+"]",t);e.length&&(void 0!==n.rules&&(validationRule(e,"add",n.rules),void 0!==n.rules.regexReplace)&&e.valid(),void 0!==n.mask&&void 0!==n.mask_option?e.inputmask(n.mask,n.mask_option):void 0!==n.mask&&e.inputmask(n.mask))})}function validate(i,e){var n,o={errorFunction:null,submitFunction:null,highlightFunction:null,unhighlightFunction:null};validatorMethods(),$.extend(o,e),(n="string"!=typeof i?i:$(i)).length&&void 0===n.attr("novalidate")&&(n.on("submit",function(e){e.preventDefault()}),n.validate({errorClass:"errorText",focusCleanup:!1,onclick:!1,onfocusout:!1,focusInvalid:!0,invalidHandler:function(e,n){"function"==typeof o.errorFunction&&o.errorFunction(i)},errorPlacement:function(e,n){n.closest(".input").find(".input__error").append(e)},highlight:function(e,n,t){let s=$(e).closest(".input");(s=s.length?s:$(e).parent()).addClass("is-invalid").removeClass("is-valid"),$(e).addClass("is-invalid"),"function"==typeof o.highlightFunction&&o.highlightFunction(i)},unhighlight:function(e,n,t){$(e).removeClass("is-invalid"),$(e).closest(".input").removeClass("is-invalid").addClass("is-valid"),"function"==typeof o.unhighlightFunction&&o.unhighlightFunction(i)},submitHandler:function(e){$("[type=submit]",$(e)).each(function(){$(this).attr("disabled","disabled")}),"function"==typeof o.submitFunction?o.submitFunction(e):n[0].submit()}}),inputsRules(n))}function validationRule(e,n,t){e.each(function(){"required"==t&&"add"==n?$(this).rules("add",{required:!0,messages:{required:message[locale].empty}}):("required"==t&&$(this).removeAttr("required"),$(this).rules(n,t))})}function addError(e,n){var t=e.attr("name"),n=$('<label id="'+t+'-error" class="errorText" for="'+t+'">'+n+"</label>"),s=e.closest(".input"),i=s.find(".input__error");console.log(t,s,i),i.empty(),n.appendTo(i),e.addClass("error"),e.closest(".input").addClass("error")}function popupOpenClose(e,n,t,s){if(!e||!n)return!1;switch(e){case"open":$.fancybox.open({src:n,type:"",opts:s||{}}),t&&setTimeout(function(){$.fancybox.close({src:n,type:"",opts:s||{}})},t);break;case"close":$.fancybox.close({src:n,type:""})}}function dropdown(e){let s={closeOnClick:!0,timing:!1},i=300;function n(e){e.preventDefault();var n=$(this).closest("."+s.containerClass),t=n.find(s.dropdownSelector);"focusin"===e.type&&n.addClass("focusin"),(n.hasClass("open")&&n.hasClass("checkbox")||n.hasClass("disabled"))&&!n.hasClass("focusin")?o():("focusin"!==e.type&&n.removeClass("focusin"),o(n),n.addClass("open").css("z-index","4"),t.slideDown(i))}function o(e=!1){let n=$("."+s.containerClass);(n=e?n.not(e):n).find("li").removeClass("hover"),n.removeClass("open"),n.find(s.dropdownSelector).slideUp(i),setTimeout(function(){n.removeAttr("style")},i)}$.extend(s,e),$(document).on("click",function(e){e=$(e.target);e.hasClass(s.containerClass)||e.closest("."+s.containerClass).length||o()}),$(document).on("click","."+s.containerClass+" "+s.btnSelector,n),$(document).on("focusin","."+s.containerClass+" "+s.btnSelector,n),$(document).on("focusout","."+s.containerClass+" "+s.btnSelector,function(){$(this).closest("."+s.containerClass).removeClass("focusin"),o($(this).closest("."+s.containerClass))}),$(document).on("close-dropdown",o),!1!==e.timing&&(i=e.timing),"select"===e.containerClass&&(i=0),s.closeOnClick&&$(document).on("click",s.dropdownSelector,function(){$(this).closest("."+s.containerClass).hasClass("checkbox")||o()})}function submitForm(e){e=$(e).serialize(),$.ajax({type:"POST",url:ajax_object.ajax_url,data:e+"&action=process_form",success:function(e){e=$.parseJSON(e);e.success?console.log(e.message):console.error(e.message)}}),$("form").each(function(){this.reset()}),$(".input--select .is-selected").removeClass("is-selected"),$.fancybox.close({src:"#form-popup",type:""}),$(document).on("onComplete.fb",function(e,n,t){"#success-popup"===t.src&&lottie.loadAnimation({container:$("#success-popup .popup__ico")[0],renderer:"svg",loop:!1,autoplay:!0,path:"/assets/img/ico-plane.json"})}),$.fancybox.open({src:"#success-popup",type:"",opts:{}}),setTimeout(function(){$.fancybox.close({src:"#success-popup",type:""})},3e3)}function blocks(){$.each({".promo":function(e){e.find("form").each(function(){$(this).hasClass("popup_form")||validate($(this),{submitFunction:submitForm})})},".reviews":function(e){e.find(".reviews__slider").each(function(){new Swiper(this,{slidesPerView:1,spaceBetween:20,navigation:{prevEl:".swiper-button-prev",nextEl:".swiper-button-next"},pagination:{el:".swiper-pagination",type:"bullets"},breakpoints:{769:{slidesPerView:2,spaceBetween:30},992:{slidesPerView:3}}})})},".input":function(e){function n(e){let n=$(this);var e=(n=void 0===e.originalEvent?e:n).closest(".input"),t=e.find(".input__select li").not(n),s=n.text(),i=n.attr("data-value");e.find('input[type="hidden"]').val(i),e.find('input:not([type="hidden"])').val(s),e.removeClass("is-invalid").addClass("is-valid"),n.addClass("is-selected"),t.removeClass("is-selected")}$(document).on("click",".input__number-minus",function(){var e=$(this).closest(".input").find("input"),n=e.attr("min")&&0<=parseInt(e.attr("min"))?parseInt(e.attr("min")):1,t=(!(e.attr("max")&&parseInt(e.attr("max"))>=n)||parseInt(e.attr("max")),parseInt(e.val()));t?n<=t-1&&e.val(t-1):e.val(n)}),$(document).on("click",".input__number-plus",function(){var e=$(this).closest(".input").find("input"),n=e.attr("min")&&0<=parseInt(e.attr("min"))?parseInt(e.attr("min")):1,t=!!(e.attr("max")&&parseInt(e.attr("max"))>=n)&&parseInt(e.attr("max")),s=parseInt(e.val());s||0===s?(!t||s+1<=t)&&e.val(s+1):e.val(n)}),$(document).on("focusout",".input--number input",function(){var e=$(this),n=e.attr("min")&&0<=parseInt(e.attr("min"))?parseInt(e.attr("min")):1,t=!!(e.attr("max")&&parseInt(e.attr("max"))>=n)&&parseInt(e.attr("max")),e=parseInt(e.val());e||$(this).val(n),e<n&&$(this).val(n),t&&t<e&&$(this).val(t)}),$(".input--select").each(function(){var e=$(this).find('input[type="hidden"]').val();e&&n($('[data-value="'+e+'"]'))}),$(document).on("click",".input--select li",n),dropdown({containerClass:"input",btnSelector:'input:not([type="hidden"])',dropdownSelector:".input__select",timing:0})},".accordion":function(e){e.find(".accordion__head").on("click",function(){var e=$(this).closest(".accordion");e.find(".accordion__body").slideToggle(300),e.toggleClass("is-open"),(e=e=e.closest(".accordion-list").find(".accordion.is-open").not(e)).find(".accordion__body").slideUp(300),e.removeClass("is-open")})},".menu":function(e){let n=$(".header__menu");var t=$(".menu__close");n.on("click",function(){e.addClass("menu--open"),e.fadeIn(300),n.css("opacity","0")}),t.on("click",function(){e.removeClass("menu--open"),e.fadeOut(300),n.fadeIn(300),n.css("opacity","1")})},".header":function(e){$(window).on("scroll",function(){50<this.scrollY?e.addClass("header--scroll"):e.removeClass("header--scroll")})}},function(e,n){$(e).length&&n($(e))})}function anchors(){$('a[href*="#"]').on("click",function(){var e=$(this).attr("href"),e=$("#"+e.split("#").pop());e.length&&$("html,body").animate({scrollTop:e.offset().top-90+"px"},{duration:1e3})})}$(document).ready(function(){blocks(),anchors(),$('a[href*="openPopup-"], [class*="openPopup"]').on("click",function(e){e.preventDefault();var n=$(this).attr("href");let s;if(n){let e=n.split("-");e.shift(),e=e.join("-"),s=e}else s=Array.from(this.classList).find(e=>0===e.indexOf("openPopup-")).replace("openPopup-","");s&&(e.preventDefault(),"#form-popup"===(s="#"+s)&&$(document).on("onComplete.fb",function(e,n,t){console.log(t.src),"#form-popup"===t.src&&(t=$(s)[0].innerHTML,$(s).empty(),$(s).append(t),setTimeout(function(){var e=$("#popup_form");e.on("submit",function(e){e.preventDefault()}),e.validate({errorClass:"errorText",focusCleanup:!1,onclick:!1,onfocusout:!1,focusInvalid:!0,errorPlacement:function(e,n){n.closest(".input").find(".input__error").append(e)},highlight:function(e,n,t){let s=$(e).closest(".input");(s=s.length?s:$(e).parent()).addClass("is-invalid").removeClass("is-valid"),$(e).addClass("is-invalid")},unhighlight:function(e,n,t){$(e).removeClass("is-invalid"),$(e).closest(".input").removeClass("is-invalid").addClass("is-valid")},submitHandler:function(e){submitForm(e)}}),inputsRules(e)},100))}),$.fancybox.open({src:s,type:"",opts:{}}))})});